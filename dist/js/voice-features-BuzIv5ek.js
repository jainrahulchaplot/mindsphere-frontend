import{j as e,a as s,u as t,b as r,c as o}from"./ui-vendor-D7u3Yckq.js";import{r as a}from"./react-vendor-Bv4S-FFt.js";import{R as i,a as l,T as n}from"./livekit-vendor-Bx6QDId7.js";import{c}from"./supabase-vendor-CiY40RCd.js";const d="https://ylrrlzwphuktzocwjjin.supabase.co",h="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InlscnJsendwaHVrdHpvY3dqamluIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTgxMzc2NjIsImV4cCI6MjA3MzcxMzY2Mn0.ZbfurKjfrd9xnXMtzzVzPgqVp1yzamvq38IckCGdiJM",u=c(d,h),x=u&&d&&h?"google":"demo",f=a.createContext(void 0);function p({children:s}){const[t,r]=a.useState(null),[o,i]=a.useState(null),[l,n]=a.useState(!0);a.useEffect(()=>{if("true"===localStorage.getItem("mindsphere_local_dev")||!u)return r("550e8400-e29b-41d4-a716-446655440000"),i({id:"550e8400-e29b-41d4-a716-446655440000",email:"demo@mindsphere.local",name:"Demo User",picture:null}),void n(!1);(async()=>{try{const{data:{session:e},error:s}=await u.auth.getSession();s?(r(null),i(null)):e?.user?(r(e.user.id),i(e.user)):(r(null),i(null))}catch(e){r(null),i(null)}finally{n(!1)}})();const{data:{subscription:e}}=u.auth.onAuthStateChange(async(e,s)=>{"SIGNED_IN"===e&&s?.user?(r(s.user.id),i(s.user),localStorage.setItem("mindsphere_auth","true")):"SIGNED_OUT"===e?(r(null),i(null),localStorage.removeItem("mindsphere_auth")):"TOKEN_REFRESHED"===e&&s?.user?(r(s.user.id),i(s.user),localStorage.setItem("mindsphere_auth","true")):"USER_UPDATED"===e&&s?.user&&(r(s.user.id),i(s.user)),n(!1)});return()=>e.unsubscribe()},[]);return e.jsx(f.Provider,{value:{userId:t,user:o,isLoading:l,signOut:async()=>{try{if("true"===localStorage.getItem("mindsphere_local_dev"))return localStorage.removeItem("mindsphere_local_dev"),r(null),i(null),localStorage.removeItem("mindsphere_auth"),void(window.location.href="/signin");u&&await u.auth.signOut(),r(null),i(null),localStorage.removeItem("mindsphere_auth")}catch(e){r(null),i(null),localStorage.removeItem("mindsphere_auth")}}},children:s})}function j(){const e=a.useContext(f);if(void 0===e)throw new Error("useAuth must be used within an AuthProvider");return e}const g=s.create({baseURL:"http://localhost:8000/api/v1",timeout:3e5,headers:{"Content-Type":"application/json"}});async function m(e){try{const{data:s}=await e;return s}catch(s){throw s}}g.interceptors.request.use(e=>(e.baseURL,e.url,e),e=>Promise.reject(e)),g.interceptors.request.use(async e=>{if(u)try{const{data:s}=await u.auth.getSession(),t=s.session?.access_token;t&&(e.headers.Authorization=`Bearer ${t}`)}catch(s){}return e}),g.interceptors.response.use(e=>e,async e=>{if(401===e.response?.status&&u)try{const{data:{session:s}}=await u.auth.getSession();if(s){const t=e.config;return t.headers.Authorization=`Bearer ${s.access_token}`,g.request(t)}}catch(s){}return e.response,Promise.reject(e)});const y=Object.freeze(Object.defineProperty({__proto__:null,api:g,default:g,getData:m},Symbol.toStringTag,{value:"Module"}));function w(){return t({mutationFn:e=>{const s=`session-${Date.now()}`;return m(g.post("/session/create",e,{headers:{"X-Idempotency-Key":s}}))}})}function v(){return t({mutationFn:({sessionId:e})=>m(g.post(`/session/${e}/generate-script`))})}function b(){return t({mutationFn:({sessionId:e})=>m(g.post(`/session/${e}/generate-audio`))})}function k(e){return r({queryKey:["streaks",e],enabled:!!e,queryFn:()=>m(g.get("/streaks/"))})}function N(){const e=o();return t({mutationFn:({userId:e})=>m(g.post("/streaks/")),onSuccess:(s,{userId:t})=>{e.invalidateQueries({queryKey:["streaks",t]})}})}function C(){return r({queryKey:["mental-health-quote"],queryFn:()=>m(g.get("/quotes/mental-health")),staleTime:3e5,gcTime:6e5})}function G(){return r({queryKey:["music-tracks"],queryFn:()=>m(g.get("/music_tracks"))})}function S(){return t({mutationFn:async({audio:e,user_id:s,session_id:t})=>{const r=new FormData;return r.append("audio",e),s&&r.append("user_id",s),t&&r.append("session_id",t),m(g.post("/journal/stt",r,{headers:{"Content-Type":"multipart/form-data"}}))}})}function M(){return t({mutationFn:async e=>(await g.post("/me/sync",e)).data})}function B(){return r({queryKey:["basic_profile"],queryFn:async()=>(await g.get("/profile/basic")).data})}const I=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"speakerGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"speakerHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3z",fill:"url(#speakerGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#glow)"}),e.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z",fill:"url(#speakerGradient)",stroke:"#cccccc",strokeWidth:"0.3"})]}),z=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"speakerGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"speakerHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3z",fill:"url(#speakerGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#glow)"}),e.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18",stroke:"#ff4444",strokeWidth:"2.5",strokeLinecap:"round",filter:"url(#glow)"})]}),A=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"speakerGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"speakerHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"glow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M3 9v6h4l5 5V4L7 9H3z",fill:"url(#speakerGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#glow)"}),e.jsx("path",{d:"M16.5 12c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02z",fill:"url(#speakerGradient)",stroke:"#cccccc",strokeWidth:"0.3"}),e.jsx("path",{d:"M14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z",fill:"url(#speakerGradient)",stroke:"#cccccc",strokeWidth:"0.3"})]}),W=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"micGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"micHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"micGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z",fill:"url(#micGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#micGlow)"}),e.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",fill:"none",stroke:"#cccccc",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#micGlow)"}),e.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23",stroke:"#cccccc",strokeWidth:"2",strokeLinecap:"round",filter:"url(#micGlow)"}),e.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23",stroke:"#cccccc",strokeWidth:"2",strokeLinecap:"round",filter:"url(#micGlow)"})]}),D=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"playGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"playHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"playGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("polygon",{points:"5,3 19,12 5,21",fill:"url(#playGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#playGlow)"})]}),_=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"pauseGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"pauseHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"pauseGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{x:"6",y:"4",width:"4",height:"16",fill:"url(#pauseGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#pauseGlow)"}),e.jsx("rect",{x:"14",y:"4",width:"4",height:"16",fill:"url(#pauseGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#pauseGlow)"})]}),E=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"stopGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"stopHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"stopGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{x:"6",y:"6",width:"12",height:"12",fill:"url(#stopGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#stopGlow)"})]}),L=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"musicGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"musicHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"musicGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M9 18V5l12-2v13",fill:"none",stroke:"#cccccc",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#musicGlow)"}),e.jsx("circle",{cx:"6",cy:"18",r:"3",fill:"url(#musicGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#musicGlow)"}),e.jsx("circle",{cx:"18",cy:"16",r:"3",fill:"url(#musicGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#musicGlow)"})]}),F=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"homeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"homeHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"homeGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",fill:"url(#homeGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#homeGlow)"}),e.jsx("polyline",{points:"9,22 9,12 15,12 15,22",fill:"none",stroke:"#cccccc",strokeWidth:"1",filter:"url(#homeGlow)"})]}),R=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"dashboardGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"dashboardHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"dashboardGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("rect",{x:"3",y:"3",width:"7",height:"7",fill:"url(#dashboardGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#dashboardGlow)"}),e.jsx("rect",{x:"14",y:"3",width:"7",height:"7",fill:"url(#dashboardGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#dashboardGlow)"}),e.jsx("rect",{x:"3",y:"14",width:"7",height:"7",fill:"url(#dashboardGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#dashboardGlow)"}),e.jsx("rect",{x:"14",y:"14",width:"7",height:"7",fill:"url(#dashboardGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#dashboardGlow)"})]}),H=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"profileGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"profileHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"profileGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("circle",{cx:"12",cy:"8",r:"4",fill:"url(#profileGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#profileGlow)"}),e.jsx("path",{d:"M6 21C6 17.6863 8.68629 15 12 15C15.3137 15 18 17.6863 18 21",fill:"url(#profileGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#profileGlow)"})]}),q=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"streakGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ff6b35"}),e.jsx("stop",{offset:"30%",stopColor:"#ff8c42"}),e.jsx("stop",{offset:"70%",stopColor:"#ff6b35"}),e.jsx("stop",{offset:"100%",stopColor:"#ff4500"})]}),e.jsxs("linearGradient",{id:"streakHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ff8c42"}),e.jsx("stop",{offset:"50%",stopColor:"#ffa500"}),e.jsx("stop",{offset:"100%",stopColor:"#ff8c42"})]}),e.jsxs("filter",{id:"streakGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"2",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12V4.5a2.5 2.5 0 0 0-5 0V12a2.5 2.5 0 0 0 2.5 2.5z",fill:"url(#streakGradient)",stroke:"url(#streakHighlight)",strokeWidth:"0.5",filter:"url(#streakGlow)"}),e.jsx("path",{d:"M15.5 14.5A2.5 2.5 0 0 0 18 12V4.5a2.5 2.5 0 0 0-5 0V12a2.5 2.5 0 0 0 2.5 2.5z",fill:"url(#streakGradient)",stroke:"url(#streakHighlight)",strokeWidth:"0.5",filter:"url(#streakGlow)"}),e.jsx("path",{d:"M12 2l1.5 4.5L18 8l-4.5 1.5L12 14l-1.5-4.5L6 8l4.5-1.5L12 2z",fill:"url(#streakGradient)",stroke:"url(#streakHighlight)",strokeWidth:"0.5",filter:"url(#streakGlow)"})]}),T=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"errorGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#ef4444"}),e.jsx("stop",{offset:"50%",stopColor:"#f87171"}),e.jsx("stop",{offset:"100%",stopColor:"#ef4444"})]}),e.jsxs("filter",{id:"errorGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#errorGradient)",stroke:"url(#errorGradient)",strokeWidth:"0.5",filter:"url(#errorGlow)"}),e.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15",stroke:"white",strokeWidth:"2",strokeLinecap:"round"}),e.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15",stroke:"white",strokeWidth:"2",strokeLinecap:"round"})]}),$=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"searchGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"searchHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"searchGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("circle",{cx:"11",cy:"11",r:"8",fill:"none",stroke:"#cccccc",strokeWidth:"2",filter:"url(#searchGlow)"}),e.jsx("path",{d:"M21 21l-4.35-4.35",stroke:"#cccccc",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#searchGlow)"})]}),P=({className:s="w-5 h-5",size:t=20})=>e.jsxs("svg",{width:t,height:t,viewBox:"0 0 24 24",fill:"none",className:s,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"clockGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#4a4a4a"}),e.jsx("stop",{offset:"30%",stopColor:"#6a6a6a"}),e.jsx("stop",{offset:"70%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"100%",stopColor:"#4a4a4a"})]}),e.jsxs("linearGradient",{id:"clockHighlight",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[e.jsx("stop",{offset:"0%",stopColor:"#8a8a8a"}),e.jsx("stop",{offset:"50%",stopColor:"#aaaaaa"}),e.jsx("stop",{offset:"100%",stopColor:"#8a8a8a"})]}),e.jsxs("filter",{id:"clockGlow",x:"-50%",y:"-50%",width:"200%",height:"200%",children:[e.jsx("feGaussianBlur",{stdDeviation:"1",result:"coloredBlur"}),e.jsxs("feMerge",{children:[e.jsx("feMergeNode",{in:"coloredBlur"}),e.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),e.jsx("circle",{cx:"12",cy:"12",r:"10",fill:"url(#clockGradient)",stroke:"#cccccc",strokeWidth:"0.5",filter:"url(#clockGlow)"}),e.jsx("path",{d:"M12 6v6l4 2",stroke:"#cccccc",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",filter:"url(#clockGlow)"})]});function V({value:s,onChange:t,disabled:r,placeholder:o="Share your thoughts or use voice notes...",className:i="",onRecordingStateChange:l,userId:n}){const[c,d]=a.useState("idle"),[h,u]=a.useState(0),[x,f]=a.useState(null),[p,j]=a.useState(!1),g=a.useRef(null),m=a.useRef([]),y=a.useRef(null),w=a.useRef(null),v=a.useRef(null),b=a.useRef(null),k=a.useRef(null),N=S();a.useEffect(()=>{l&&l("recording"===c)},[c,l]),a.useEffect(()=>{if("recording"===c&&w.current){const e=w.current,s=e.getContext("2d");if(!s)return;const t=new(window.AudioContext||window.webkitAudioContext),r=t.createAnalyser();r.fftSize=256,v.current=r;t.createMediaStreamSource(y.current).connect(r);const o=r.frequencyBinCount,a=new Uint8Array(o),i=()=>{if("recording"!==c)return;r.getByteFrequencyData(a),s.fillStyle="#ffffff",s.fillRect(0,0,e.width,e.height);const t=e.width/o*2.5;let l,n=0;for(let r=0;r<o;r++){l=a[r]/255*e.height;const o=s.createLinearGradient(0,e.height-l,0,e.height);o.addColorStop(0,"rgba(0, 0, 0, 0.9)"),o.addColorStop(.5,"rgba(0, 0, 0, 0.7)"),o.addColorStop(1,"rgba(0, 0, 0, 0.5)"),s.fillStyle=o,s.fillRect(n,e.height-l,t,l),n+=t+1}b.current=requestAnimationFrame(i)};i()}else b.current&&(cancelAnimationFrame(b.current),b.current=null);return()=>{b.current&&cancelAnimationFrame(b.current)}},[c]);const C=async e=>{try{d("processing");const r=new File([e],"recording.webm",{type:e.type||"audio/webm"}),o=await N.mutateAsync({audio:r,user_id:n});if(o.text&&o.text.trim()){const e=s?`${s} ${o.text}`:o.text;t(e)}d("idle"),u(0)}catch(r){d("idle")}finally{k.current&&clearInterval(k.current)}};a.useEffect(()=>()=>{y.current&&y.current.getTracks().forEach(e=>e.stop()),k.current&&clearInterval(k.current),b.current&&cancelAnimationFrame(b.current)},[]);return e.jsxs("div",{className:`space-y-3 ${i}`,children:[e.jsxs("div",{className:"relative group",children:[e.jsx("textarea",{value:s,onChange:e=>t(e.target.value),onFocus:()=>j(!0),onBlur:()=>j(!1),placeholder:o,style:{backgroundColor:"#00000030"},className:`\n            w-full bg-gray-800 text-white border rounded-xl px-4 py-3 \n            placeholder-white/40 focus:outline-none \n            text-sm resize-none transition-all duration-300\n            backdrop-blur-sm\n            ${p?"border-white/40 shadow-lg shadow-white/10":"border-white/20 hover:border-white/30 hover:shadow-lg hover:shadow-white/5"}\n            ${r||"processing"===c?"opacity-50 cursor-not-allowed":"cursor-text"}\n          `,rows:3,disabled:r||"processing"===c}),e.jsxs("div",{className:"absolute bottom-3 right-3 flex items-center gap-2",children:["idle"===c&&e.jsx("button",{onClick:async()=>{try{f(null),u(0),m.current=[];const e=await navigator.mediaDevices.getUserMedia({audio:{echoCancellation:!0,noiseSuppression:!0,sampleRate:44100}});y.current=e;const s=["audio/webm;codecs=opus","audio/webm","audio/mp4","audio/ogg;codecs=opus","audio/ogg","audio/wav"];let t="";for(const o of s)if(MediaRecorder.isTypeSupported(o)){t=o;break}t||(t="audio/webm");const r=new MediaRecorder(e,{mimeType:t||void 0});g.current=r,r.ondataavailable=e=>{e.data.size>0&&m.current.push(e.data)},r.onstop=()=>{const e=new Blob(m.current,{type:t||"audio/webm"});C(e)},r.start(100),d("recording"),k.current=setInterval(()=>{u(e=>e+1)},1e3)}catch(e){f("Microphone access denied. Please allow microphone access and try again."),d("idle")}},disabled:r,className:"\n                w-10 h-10 flex items-center justify-center \n                text-white/80 hover:text-white \n                transition-all duration-300 rounded-xl \n                bg-gradient-to-r from-white/5 to-white/2\n                hover:from-white/10 hover:to-white/5\n                hover:scale-110 active:scale-95\n                backdrop-blur-sm border border-white/20\n                group-hover:border-white/30 hover:shadow-lg hover:shadow-white/10\n              ",title:"Record voice note","aria-label":"Start recording voice note",children:e.jsx(W,{className:"w-5 h-5"})}),"recording"===c&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-gradient-to-r from-gray-800/50 to-gray-700/30 border border-gray-600/40 rounded-lg backdrop-blur-sm shadow-lg shadow-gray-800/20",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-pulse"}),e.jsx("div",{className:"text-xs text-gray-200 font-semibold",children:(G=h,`${Math.floor(G/60)}:${(G%60).toString().padStart(2,"0")}`)})]}),e.jsx("button",{onClick:()=>{g.current&&"recording"===c&&(g.current.stop(),d("processing"))},className:"\n                  w-10 h-10 flex items-center justify-center \n                  text-gray-400 hover:text-gray-300 \n                  transition-all duration-300 rounded-xl \n                  bg-gradient-to-r from-gray-800/20 to-gray-700/10\n                  hover:from-gray-800/30 hover:to-gray-700/20\n                  hover:scale-110 active:scale-95\n                  backdrop-blur-sm border border-gray-600/40\n                  hover:shadow-lg hover:shadow-gray-800/20\n                ",style:{color:"red"},title:"Stop recording","aria-label":"Stop recording",children:e.jsx(E,{className:"w-5 h-5"})}),e.jsx("button",{onClick:()=>{g.current&&"recording"===c&&g.current.stop(),y.current&&y.current.getTracks().forEach(e=>e.stop()),d("idle"),u(0),m.current=[],k.current&&clearInterval(k.current),f(null),N.isError&&N.reset(),N.isPending&&N.reset()},className:"\n                  w-10 h-10 flex items-center justify-center \n                  text-gray-400 hover:text-gray-300 \n                  transition-all duration-300 rounded-xl \n                  bg-gradient-to-r from-gray-800/20 to-gray-700/10\n                  hover:from-gray-800/30 hover:to-gray-700/20\n                  hover:scale-110 active:scale-95\n                  backdrop-blur-sm border border-gray-600/40\n                  hover:shadow-lg hover:shadow-gray-800/20\n                ",style:{color:"red"},title:"Cancel recording","aria-label":"Cancel recording",children:e.jsx(T,{className:"w-5 h-5"})})]}),"processing"===c&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-blue-500/20 border border-blue-400/30 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"w-4 h-4 border-2 border-blue-400/30 border-t-blue-400 rounded-full animate-spin"}),e.jsx("div",{className:"text-xs text-blue-300 font-medium",children:"Processing..."})]})]})]}),"recording"===c&&e.jsx("div",{className:"h-12 rounded-xl overflow-hidden border border-gray-300",style:{backgroundColor:"#ffffff"},children:e.jsx("canvas",{ref:w,width:400,height:48,className:"w-full h-full",style:{backgroundColor:"#ffffff"}})}),x&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-white/5 border border-white/20 rounded-xl backdrop-blur-sm",children:[e.jsx("div",{className:"text-white/80 text-lg",children:"⚠️"}),e.jsx("div",{className:"text-sm text-white/80 flex-1",children:x}),e.jsx("button",{onClick:()=>f(null),className:"text-white/60 hover:text-white/80 transition-colors p-1 rounded-lg hover:bg-white/10","aria-label":"Dismiss error",children:e.jsx(T,{className:"w-4 h-4"})})]})]});var G}function U({isActive:s,isUser:t,className:r=""}){const o=a.useRef(null);a.useRef();const[i,l]=a.useState(0);return a.useEffect(()=>{const e=o.current;if(!e)return;const r=e.getContext("2d");if(!r)return;let a,l=0;const n=()=>{if(r.clearRect(0,0,e.width,e.height),!s)return void(a=requestAnimationFrame(n));const o=e.width/2,c=e.height/2;for(let e=0;e<3;e++){const a=20+15*e+5*Math.sin(l+e),n=s?(1-.3*e)*(.3+.7*i):0;r.beginPath(),r.arc(o,c,a,0,2*Math.PI),r.strokeStyle=t?`rgba(59, 130, 246, ${n})`:`rgba(16, 185, 129, ${n})`,r.lineWidth=2,r.stroke()}const d=20+3*Math.sin(2*l);r.beginPath(),r.arc(o,c,d,0,2*Math.PI),r.fillStyle=t?`rgba(59, 130, 246, ${.8+.2*i})`:`rgba(16, 185, 129, ${.8+.2*i})`,r.fill(),l+=.1,a=requestAnimationFrame(n)};return n(),()=>{a&&cancelAnimationFrame(a)}},[s,t,i]),a.useEffect(()=>{if(!s)return void l(0);const e=setInterval(()=>{l(.8*Math.random()+.2)},100);return()=>clearInterval(e)},[s]),e.jsx("div",{className:`voice-visualizer ${r}`,children:e.jsx("canvas",{ref:o,width:120,height:120,className:"w-20 h-20"})})}function K({token:s,serverUrl:t,roomName:r}){const[o,c]=a.useState(null),[d,h]=a.useState(!1),[u,x]=a.useState(!1),[f,p]=a.useState(null),[j,g]=a.useState(""),[m,y]=a.useState(""),[w,v]=a.useState(""),[b,k]=a.useState(!1),[N,C]=a.useState(!1),[G,S]=a.useState(!1);a.useEffect(()=>{if(s&&t&&r)return M(),()=>{o&&o.disconnect()};p("Missing connection parameters")},[s,t,r]),a.useEffect(()=>()=>{o&&o.disconnect()},[o]);const M=async()=>{try{x(!0),p(null);const r=new i({adaptiveStream:!0,dynacast:!0,publishDefaults:{videoSimulcastLayers:[]}});r.on(l.Connected,()=>{h(!0),x(!1)}),r.on(l.Disconnected,()=>{h(!1),k(!1),C(!1),S(!1)}),r.on(l.DataReceived,(e,s)=>{const t=(new TextDecoder).decode(e);g(e=>e+t+"\n")}),r.on(l.TrackSubscribed,(e,s,t)=>{if(e.kind===n.Kind.Audio){e.attach().play(),t.identity.includes("agent")||t.identity.includes("assistant")?(C(!0),v(e=>e+"\n[Agent]: Connected and ready to help")):(k(!0),y(e=>e+"\n[You]: Connected to voice session"))}}),r.on(l.LocalTrackPublished,e=>{e.track?.kind===n.Kind.Audio&&(S(!0),y(e=>e+"\n[You]: Microphone active"))}),r.on(l.LocalTrackUnpublished,e=>{e.track?.kind===n.Kind.Audio&&(S(!1),y(e=>e+"\n[You]: Microphone inactive"))}),r.on(l.ActiveSpeakersChanged,e=>{const s=e.some(e=>!e.identity.includes("agent")&&!e.identity.includes("assistant")),t=e.some(e=>e.identity.includes("agent")||e.identity.includes("assistant"));k(s),C(t)}),await r.connect(t,s);try{const e=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1});await r.localParticipant.enableCameraAndMicrophone(),e.getTracks().forEach(e=>e.stop())}catch(e){return p("Microphone access denied. Please allow microphone permissions and try again."),void x(!1)}c(r)}catch(e){p(e instanceof Error?e.message:"Failed to connect"),x(!1)}};return e.jsx("div",{className:"voice-interface",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white text-center mb-4",children:"Voice Session"}),u&&e.jsx("div",{className:"bg-blue-500/20 border border-blue-500/30 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"}),e.jsx("p",{className:"text-blue-400 text-sm",children:"Connecting..."})]})}),f&&e.jsx("div",{className:"bg-red-500/20 border border-red-500/30 rounded-lg p-3",children:e.jsx("p",{className:"text-red-400 text-sm",children:f})}),d&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-center space-x-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(U,{isActive:b,isUser:!0,className:"mb-2"}),e.jsx("p",{className:"text-blue-400 text-xs font-medium",children:"You"}),b&&e.jsx("p",{className:"text-blue-300 text-xs animate-pulse",children:"Speaking..."})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(U,{isActive:N,isUser:!1,className:"mb-2"}),e.jsx("p",{className:"text-green-400 text-xs font-medium",children:"Agent"}),N&&e.jsx("p",{className:"text-green-300 text-xs animate-pulse",children:"Speaking..."})]})]}),e.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-3",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-400 font-medium text-sm",children:"Connected"})]}),e.jsx("p",{className:"text-gray-300 text-xs text-center",children:"Speak naturally with your meditation guide"}),e.jsxs("div",{className:"mt-2 flex items-center justify-center space-x-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full "+(G?"bg-green-500":"bg-red-500")}),e.jsx("span",{className:"text-xs "+(G?"text-green-400":"text-red-400"),children:G?"Microphone Active":"Microphone Inactive"})]})]}),e.jsxs("div",{className:"space-y-3",children:[m&&e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-3",children:[e.jsxs("h4",{className:"text-blue-400 font-medium text-sm mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-400 rounded-full mr-2"}),"Your Messages"]}),e.jsx("div",{className:"text-gray-300 text-xs whitespace-pre-wrap max-h-20 overflow-y-auto",children:m})]}),w&&e.jsxs("div",{className:"bg-green-500/10 border border-green-500/20 rounded-lg p-3",children:[e.jsxs("h4",{className:"text-green-400 font-medium text-sm mb-2 flex items-center",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full mr-2"}),"Agent Responses"]}),e.jsx("div",{className:"text-gray-300 text-xs whitespace-pre-wrap max-h-20 overflow-y-auto",children:w})]}),j&&e.jsxs("div",{className:"bg-gray-700/50 rounded-lg p-3",children:[e.jsx("h4",{className:"text-white font-medium text-sm mb-2",children:"System Messages"}),e.jsx("div",{className:"text-gray-300 text-xs whitespace-pre-wrap max-h-20 overflow-y-auto",children:j})]})]})]}),!d&&!u&&!f&&e.jsx("button",{onClick:M,className:"w-full bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 text-sm",children:"Connect to Voice Session"}),d&&e.jsx("button",{onClick:async()=>{if(o){try{const e="http://localhost:8000";(await fetch(`${e}/api/voice/room/${o.name}`,{method:"DELETE"})).ok}catch(e){}o.disconnect(),c(null),h(!1),k(!1),C(!1),S(!1),g(""),y(""),v("")}},className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200 text-sm",children:"Disconnect"})]})})}function O({onSessionStart:s,onSessionEnd:t,className:r=""}){const[o,i]=a.useState(!1),[l,n]=a.useState(!1),[c,d]=a.useState(null),{user:h}=j();return e.jsx("div",{className:`voice-agent-container ${r}`,children:o?c?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-green-500/20 border border-green-500/30 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-center space-x-2 mb-2",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full animate-pulse"}),e.jsx("span",{className:"text-green-400 font-medium",children:"Voice Session Active"})]}),e.jsxs("p",{className:"text-gray-300 text-sm text-center",children:["Connected to meditation room: ",c.roomName]})]}),e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4",children:e.jsx(K,{token:c.token,serverUrl:c.serverUrl,roomName:c.roomName})}),e.jsx("button",{onClick:()=>{i(!1),d(null),t?.()},className:"w-full bg-red-600 hover:bg-red-700 text-white font-semibold py-2 px-4 rounded-lg transition-colors duration-200",children:"End Session"})]}):null:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Yours Voice Meditation Assistant"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Start a voice conversation with your AI meditation guide"}),e.jsx("button",{onClick:async()=>{try{n(!0);const e="http://localhost:8000",t=await fetch(`${e}/api/voice/token`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({roomName:`meditation_room_${h?.id||"550e8400-e29b-41d4-a716-446655440000"}`,participantName:"MindSphere User"})});if(!t.ok)throw new Error("Failed to get connection token");const r=await t.json();d(r),i(!0),s?.()}catch(e){alert("Failed to start voice session. Please try again.")}finally{n(!1)}},disabled:l,className:"bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700 disabled:opacity-50 disabled:cursor-not-allowed text-white font-semibold py-3 px-6 rounded-lg transition-all duration-200 transform hover:scale-105",children:l?"Connecting...":"Start Voice Session"}),e.jsx("p",{className:"text-gray-500 text-sm",children:"Connect to your AI meditation guide"})]})})}export{p as A,P as C,R as D,F as H,L as M,H as P,q as S,z as V,G as a,_ as b,D as c,A as d,I as e,$ as f,j as g,C as h,w as i,N as j,V as k,E as l,v as m,b as n,x as o,S as p,W as q,g as r,u as s,B as t,k as u,M as v,O as w,K as x,y};
